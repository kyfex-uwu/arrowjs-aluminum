<!doctype html>
<html>
<head>
    <title>ArrowJS: Aluminum</title>
    <style>
        body{
            background-color: #383642;
            color: #dbf2f6;
            font-family: sans-serif;

            min-height: 200vh;
        }

        .sidebarLink{
            color: #7485df;
        }

        .code{
            font-family: monospace;
            background-color: #7485df44;
            padding:0.2em 0.4em;
            border-radius: 0.5em;

            box-shadow: inset 0 0 0.3em #7485df88, 0 0 0.5em #7485df44;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="importmap">
        {
            "imports":{
                "@arrow-js/core": "https://esm.sh/@arrow-js/core",
                "arrowjs-aluminum": "/dist/index.js"
            }
        }
    </script>
    <script type="module">
        //"arrowjs-aluminum": "https://esm.sh/arrowjs-aluminum"
        import {PageAttachedRouter, createGenerator, Router} from "arrowjs-aluminum";
        import {html} from "@arrow-js/core";

        const codeGenerator = createGenerator("span", {"class":"code"});
        const code = inside => codeGenerator.create(inside);

        const sidebarLinkGenerator = createGenerator("a", {"class":"sidebarLink"}, (dest, attributes)=>{
            if(dest.startsWith("/"))
                dest = "/arrowjs-aluminum"+dest;
            attributes["@click"] = e=>{
                router.redirect(dest);
                e.preventDefault();
            };
            attributes.href = dest;
        });
        const sidebar = html`<div><div style="
                width: fit-content;
                background-color: #0006;
                float: right;
                padding: 1rem;
                margin:1rem;
                border-radius: 1.5rem;
                box-shadow: inset 0 0 0.6rem #fff4, 0 0 1rem #0008;
                line-height: 2rem;">
            ${sidebarLinkGenerator.create("")`Introduction`}<br>
            ${sidebarLinkGenerator.create("/ref")`ref`}<br>
            ${sidebarLinkGenerator.create("/create-generator")`createGenerator`}<br>
            ${sidebarLinkGenerator.create("/page-attached-router")`PageAttachedRouter`}<br>
        </div></div>`;

        const router = new Router(html`404 - docs coming soon`, (template)=>{
            return html`<div></div><div style="display:grid; grid-template-columns: 1fr 50vw 1fr;">${sidebar}<main>${template}</main></div>`;
        });
        router.addRoute("", ()=>html`
            <div style="text-align: center">
                <img src="https://github.com/kyfex-uwu/arrowjs-aluminum/tree/main/docs/arrowjs_aluminum.webp" style="width: 30vw; display: inline-block;">
            </div>
            <div>ArrowJS is a JavaScript library built on simplicity. It promises fast, clean code without compromising
            modern features like reactivity and rendering. However, it's missing other common web development patterns,
            making it feel closer to vanilla JS than a framework.</div><br>
            <div>ArrowJS: Aluminum aims to fill that gap by providing two much needed paradigms that are left out of
            ArrowJS: routing and components.</div><br><br>
            <div style="font-size: 0.8em; opacity:0.8;">ArrowJS: Aluminum is not affiliated with ArrowJS in any way. ArrowJS: Aluminum is a library built on top of
            ArrowJS by a separate author.</div>`)
        router.addRoute("ref", ()=>html`
            The ${code("ref")} function provides an easy way to create a reactive value. Under the hood, ${code("const yourRef = ref(yourValue)")} is functionally
            identical to ${code("reactive({value:yourValue)})")}. For simplicity, you can also call ${code(".$on()")} and ${code(".$off()")} directly on
            ${code("yourRef")}, which functions the same as calling those methods with the internal "value" property.`)
        router.addRoute("PageAttachedRouter", ()=>html`
            <p>The ${code("PageAttachedRouter")} is exactly what you'd expect when you think of a web router: it renders
            some page depending on the current URL. In addition to all the capabilities of the Router, it can force a
            page rerender via the ${code("rerender")} function and it can redirect to a new page without reloading the
            site via the ${code("redirect")} function.</p>
            <p>To use the ${code("PageAttachedRouter")}, create your router, add your routes, and then call
            ${code("rerender")}.</p>
            <p>The ${code("rerender")} function is very simple; it only rerenders the current page.</p>
            <p>The ${code("redirect")} function redirects to the given path and rerenders the page. If replace is true,
            the new path will replace the previous one; this means in the history, the previous page will have never
            existed. (the back button won't function like you think it will, it'll skip the previous page and go to the
            one before it.)</p><br>
            <p>${code("PageAttachedRouter.rerender():void")}<br>Rerenders the current page</p>
            <p>${code("PageAttachedRouter.redirect(newLocation:string = window.location.pathname, replace?:false):boolean")}
            <br>Redirects to ${code("newLocation")}. If ${code("replace")} is false, the old window location will not
            show up in the history</p>
            <ul>
                <li>${code("PageAttachedRouter.redirect(\"examplePath\")")} - Redirects the page to
                yourpage.com/examplePath </li>
            </ul>`)
        router.addRoute("createGenerator", ()=>html`
            Most web libraries follow a component paradigm. ArrowJS: Aluminum provides components in a slightly
            unconventional way`)


        const parentRouter = new PageAttachedRouter(document.getElementById("root"), html`no page :3`);
        parentRouter.addRoute("arrowjs-aluminum", router);
        parentRouter.redirect();
    </script>
</body>
</html>
